<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>

<!-- ROOT: StackPane agar popup bisa overlay -->
<StackPane xmlns="http://javafx.com/javafx/21.0.0"
           xmlns:fx="http://javafx.com/fxml/1"
           stylesheets="@../designer/designer.css"
           fx:controller="com.example.trying3.controller.production.ProduksiController"
           style="-fx-background-color: transparent;">

    <!-- LAYER 1: Konten Utama -->
    <ScrollPane fitToWidth="true"
                styleClass="content-pane-scroll"
                style="-fx-background: transparent; -fx-background-color: transparent;">

        <content>
            <VBox spacing="20.0" style="-fx-background-color: #f4f7fa;">
                <padding>
                    <Insets top="30" left="30" right="30" bottom="30"/>
                </padding>

                <children>
                    <VBox spacing="5.0">
                        <children>
                            <Label styleClass="page-title" text="Kelola Produksi" />
                            <Label styleClass="muted" text="Kelola proses produksi cetak" />
                        </children>
                    </VBox>

                    <HBox spacing="20.0">
                        <VBox styleClass="stat-box" HBox.hgrow="ALWAYS">
                            <HBox alignment="CENTER_LEFT">
                                <Label styleClass="stat-title" text="Menunggu Produksi"/>
                                <Region HBox.hgrow="ALWAYS" />
                                <Label text="ðŸ•’" style="-fx-text-fill: #999; -fx-font-size:14px;"/>
                            </HBox>
                            <Label fx:id="waitingLabel" styleClass="stat-value" text="0"/>
                            <Label styleClass="stat-subtitle" text="Siap diproduksi"/>
                        </VBox>

                        <VBox styleClass="stat-box" HBox.hgrow="ALWAYS">
                            <HBox alignment="CENTER_LEFT">
                                <Label styleClass="stat-title" text="Sedang Diproduksi"/>
                                <Region HBox.hgrow="ALWAYS" />
                                <Label text="âš™ï¸" style="-fx-text-fill: #999; -fx-font-size:14px;"/>
                            </HBox>
                            <Label fx:id="inProgressLabel" styleClass="stat-value" text="0"/>
                            <Label styleClass="stat-subtitle" text="Dalam proses"/>
                        </VBox>

                        <VBox styleClass="stat-box" HBox.hgrow="ALWAYS">
                            <HBox alignment="CENTER_LEFT">
                                <Label styleClass="stat-title" text="Selesai Produksi"/>
                                <Region HBox.hgrow="ALWAYS" />
                                <Label text="âœ”" style="-fx-text-fill: #999; -fx-font-size:14px;"/>
                            </HBox>
                            <Label fx:id="completedLabel" styleClass="stat-value" text="0"/>
                            <Label styleClass="stat-subtitle" text="Siap dikirim"/>
                        </VBox>
                    </HBox>

                    <VBox styleClass="card" spacing="15.0">
                        <children>
                            <Label styleClass="card-title" text="Antrian Produksi"/>
                            <Label styleClass="muted" text="Pesanan yang siap untuk diproduksi" />

                            <VBox fx:id="orderListContainer" spacing="12.0" />
                        </children>
                    </VBox>

                </children>
            </VBox>
        </content>
    </ScrollPane>

    <!-- LAYER 2: POPUP KENDALA (Overlay) -->
    <StackPane fx:id="kendalaPopupContainer" visible="false" managed="false"
               style="-fx-background-color: rgba(0, 0, 0, 0.4);">

        <VBox maxWidth="500" maxHeight="400" spacing="15"
              style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 30; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.3), 20, 0, 0, 0);">

            <!-- Header -->
            <HBox alignment="CENTER_LEFT">
                <VBox spacing="2" HBox.hgrow="ALWAYS">
                    <padding>
                        <Insets left="10"/>
                    </padding>
                    <Label fx:id="lblKendalaTitle" text="Laporkan Kendala" styleClass="card-title" style="-fx-font-size: 18px;"/>
                    <Label text="Laporkan kendala yang terjadi selama produksi" styleClass="muted" style="-fx-font-size: 11px;"/>
                </VBox>
            </HBox>

            <!-- Form -->
            <VBox spacing="5">
                <Label text="Deskripsi Kendala:" styleClass="form-label" style="-fx-font-weight: bold;"/>
                <Label text="Jelaskan kendala yang terjadi secara detail agar Admin dapat membantu menyelesaikan." styleClass="muted" style="-fx-font-size: 11px;"/>
            </VBox>

            <TextArea fx:id="txtKendala" prefRowCount="5" wrapText="true" styleClass="text-area"
                      promptText="Contoh: Mesin cetak mengalami paper jam, perlu teknisi untuk memperbaiki..."/>

            <Region VBox.vgrow="ALWAYS"/>

            <!-- Buttons -->
            <HBox spacing="10" alignment="CENTER_RIGHT">
                <Button text="Batal" onAction="#cancelKendala" styleClass="button-secondary" prefWidth="100"/>
                <Button text="Kirim Laporan" onAction="#submitKendala" styleClass="button-danger" prefWidth="130"/>
            </HBox>
        </VBox>
    </StackPane>

</StackPane>
